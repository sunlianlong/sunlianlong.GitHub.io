(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{618:function(s,n,a){"use strict";a.r(n);var e=a(3),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("2019/08/27 14:49")]),s._v(" "),a("p",[s._v("表单新增和修改共用一套，需要在关闭时重置表单，两种解决方案。\n1.before-close重置表单后初始化数据，新增表单只控制显示")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<template>\n  <div class=\'user\'>\n      <el-dialog :title="addDeptForm.title" :visible.sync="addDeptForm.adCategoryAddVisible" :before-close="closeDialog">\n        <el-form :model="addDeptForm" :rules="addDeptRules" ref="addDeptForm" label-width="110px" style="margin-top: 10px; margin-left: 40px;" class="demo-ruleForm">\n          <el-form-item label="审核白名单: " prop="whitelist">\n            <el-input type="text" v-model="addDeptForm.whitelist" autocomplete="off" placeholder="审核白名单" ></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot="footer" class="dialog-footer">\n          <el-button @click="closeDialog">取 消</el-button>\n          <el-button type="primary" @click="adCategoryAddSubmit(\'addDeptForm\')">确 定</el-button>\n        </div>\n      </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  name: \'whiteList\',\n  data() {\n    var validatorDesc = (rule, value, callback) => {\n        if (value === \'\') {\n          callback(new Error(\'请输入白名单\'));\n        } else {\n          if (/[\\u4E00-\\u9FA5]/g.test(value)) {\n            callback(new Error(\'白名单不能输入汉字\'));\n          }else if(/^\\s*$/.test(value)){\n            callback(new Error(\'白名单不能为空\'));\n          }else if(!/^.{1,20}$/.test(value)){\n            callback(new Error(\'白名单只能输入1-26位\'));\n          }else{\n            callback();\n          }\n        }\n    };\n    return {\n      // 新增校验规则\n      addDeptRules:{\n          whitelist: [\n            {required: true,trigger: "change",validator:validatorDesc }\n          ],\n      },\n      // 新增数据\n      addDeptForm:{\n        title:\'\',\n        adCategoryAddVisible:false,\n        whitelist:\'\'\n      },\n    }\n  },\n  methods: {\n    // 新增操作\n    handleAdd(){\n      this.addDeptForm.title = "新增";\n      this.addDeptForm.adCategoryAddVisible = true;\n    },\n    // 修改\n    handleEdit(){\n     this.addDeptForm.title = "修改";\n     this.addDeptForm.id = 1;\n     this.addDeptForm.whitelist = "黑涩会";\n     this.addDeptForm.adCategoryAddVisible = true; \n    },\n    // 新增修改弹窗确定按钮\n    adCategoryAddSubmit(formName){\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          console.log("校验通过")\n        } else {\n          this.$message.error(\'输入格式不正确\');\n          return false;\n        }\n      });\n    },\n    // 关闭并重置弹窗\n    closeDialog(){\n      this.addDeptForm.adCategoryAddVisible = false;\n      this.$refs.addDeptForm.resetFields();\n      this.addDeptForm.whitelist = \'\';\n    },\n  },\n}\n<\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("before-close只重置表单，新增表单时初始化数据，el-dialog增加v-if属性销毁form表单")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<template>\n  <div class=\'user\'>\n      <el-dialog :title="addDeptForm.title" :visible.sync="addDeptForm.adCategoryAddVisible" v-if="addDeptForm.adCategoryAddVisible" :before-close="closeDialog">\n        <el-form :model="addDeptForm" :rules="addDeptRules" ref="addDeptForm" label-width="110px" style="margin-top: 10px; margin-left: 40px;" class="demo-ruleForm">\n          <el-form-item label="审核白名单: " prop="whitelist">\n            <el-input type="text" v-model="addDeptForm.whitelist" autocomplete="off" placeholder="审核白名单" ></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot="footer" class="dialog-footer">\n          <el-button @click="closeDialog">取 消</el-button>\n          <el-button type="primary" @click="adCategoryAddSubmit(\'addDeptForm\')">确 定</el-button>\n        </div>\n      </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  name: \'whiteList\',\n  data() {\n    var validatorDesc = (rule, value, callback) => {\n        if (value === \'\') {\n          callback(new Error(\'请输入白名单\'));\n        } else {\n          if (/[\\u4E00-\\u9FA5]/g.test(value)) {\n            callback(new Error(\'白名单不能输入汉字\'));\n          }else if(/^\\s*$/.test(value)){\n            callback(new Error(\'白名单不能为空\'));\n          }else if(!/^.{1,20}$/.test(value)){\n            callback(new Error(\'白名单只能输入1-26位\'));\n          }else{\n            callback();\n          }\n        }\n    };\n    return {\n      // 新增校验规则\n      addDeptRules:{\n          whitelist: [\n            {required: true,trigger: "change",validator:validatorDesc }\n          ],\n      },\n      // 新增数据\n      addDeptForm:{\n        title:\'\',\n        adCategoryAddVisible:false,\n        whitelist:\'\'\n      },\n    }\n  },\n  methods: {\n    // 新增操作\n    handleAdd(){\n      this.addDeptForm.title = "新增";\n      this.addDeptForm.whitelist = \'\';\n      this.addDeptForm.adCategoryAddVisible = true;\n    },\n    // 修改\n    handleEdit(){\n     this.addDeptForm.title = "修改";\n     this.addDeptForm.id = 1;\n     this.addDeptForm.whitelist = "黑涩会";\n     this.addDeptForm.adCategoryAddVisible = true; \n    },\n    // 新增修改弹窗确定按钮\n    adCategoryAddSubmit(formName){\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          console.log("校验通过")\n        } else {\n          this.$message.error(\'输入格式不正确\');\n          return false;\n        }\n      });\n    },\n    // 关闭并重置弹窗\n    closeDialog(){\n      this.addDeptForm.adCategoryAddVisible = false;\n      this.$refs.addDeptForm.resetFields();\n    },\n  },\n}\n<\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);